{"ast":null,"code":"const EXTENSION_ID = 'aMonteSl.code-xr';\n\n// Función principal basada en tu ejemplo exacto\nasync function obtenerMetricasCodeXR() {\n  var _data$results$, _ext$versions$, _ext$versions$2;\n  const url = 'https://marketplace.visualstudio.com/_apis/public/gallery/extensionquery?api-version=3.0-preview.1';\n\n  // Body de la petición, filtrando por \"aMonteSl.code-xr\" y pidiendo estadísticas (flags = 256)\n  const body = {\n    filters: [{\n      criteria: [{\n        filterType: 7,\n        value: EXTENSION_ID // Identificador completo de la extensión\n      }],\n      pageNumber: 1,\n      pageSize: 1\n    }],\n    flags: 256 // IncludeStatistics (descargas, instalaciones, rating)\n  };\n  console.log('🔍 Realizando petición exacta a la API para:', EXTENSION_ID);\n  console.log('📋 Body de la petición:', JSON.stringify(body, null, 2));\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json;api-version=3.0-preview.1'\n    },\n    body: JSON.stringify(body)\n  });\n  console.log('📡 Respuesta HTTP status:', response.status);\n  if (!response.ok) {\n    throw new Error(`Error al consultar API: ${response.status} ${response.statusText}`);\n  }\n  const data = await response.json();\n  console.log('📊 Datos completos de la API:', data);\n  const ext = (_data$results$ = data.results[0]) === null || _data$results$ === void 0 ? void 0 : _data$results$.extensions[0];\n  if (!ext) {\n    console.error('❌ La extensión Code-XR no fue encontrada en el Marketplace.');\n    throw new Error('La extensión Code-XR no fue encontrada en el Marketplace.');\n  }\n  console.log('✅ Extensión encontrada:', ext.extensionName);\n  console.log('📈 Estadísticas raw:', ext.statistics);\n\n  // 🔍 DEPURACIÓN ESPECÍFICA DE VERSIONES\n  console.log('🏷️ DEPURACIÓN DE VERSIONES:');\n  console.log('📦 ¿Existe ext.versions?', !!ext.versions);\n  console.log('📦 Tipo de ext.versions:', typeof ext.versions);\n  console.log('📦 Es array ext.versions?', Array.isArray(ext.versions));\n  if (ext.versions) {\n    console.log('📦 Longitud del array versions:', ext.versions.length);\n    console.log('📦 TODAS las versiones disponibles:', ext.versions);\n\n    // Mostrar las primeras 3 versiones con detalle\n    ext.versions.slice(0, 3).forEach((version, index) => {\n      console.log(`📦 Versión ${index}:`, {\n        version: version.version,\n        lastUpdated: version.lastUpdated,\n        properties: version.properties,\n        assetUri: version.assetUri,\n        fallbackAssetUri: version.fallbackAssetUri\n      });\n    });\n  } else {\n    console.log('❌ ext.versions NO existe');\n  }\n\n  // Intentar obtener versión de múltiples formas\n  let latestVersion = null;\n\n  // Método 1: Primer elemento del array versions\n  if (ext.versions && Array.isArray(ext.versions) && ext.versions.length > 0) {\n    latestVersion = ext.versions[0].version;\n    console.log('✅ Método 1 - Versión desde versions[0]:', latestVersion);\n  }\n\n  // Método 2: Buscar en displayName o extensionName\n  if (!latestVersion && ext.displayName) {\n    const versionMatch = ext.displayName.match(/v?(\\d+\\.\\d+\\.\\d+)/);\n    if (versionMatch) {\n      latestVersion = versionMatch[1];\n      console.log('✅ Método 2 - Versión desde displayName:', latestVersion);\n    }\n  }\n\n  // Método 3: Buscar en properties\n  if (!latestVersion && ext.versions && (_ext$versions$ = ext.versions[0]) !== null && _ext$versions$ !== void 0 && _ext$versions$.properties) {\n    for (const prop of ext.versions[0].properties) {\n      if (prop.key === 'Microsoft.VisualStudio.Code.Engine' || prop.key === 'version' || prop.key.toLowerCase().includes('version')) {\n        console.log(`🔍 Propiedad encontrada: ${prop.key} = ${prop.value}`);\n        const versionMatch = prop.value.match(/v?(\\d+\\.\\d+\\.\\d+)/);\n        if (versionMatch) {\n          latestVersion = versionMatch[1];\n          console.log('✅ Método 3 - Versión desde properties:', latestVersion);\n          break;\n        }\n      }\n    }\n  }\n\n  // Método 4: Buscar en manifestVersion (si existe)\n  if (!latestVersion && ext.versions && (_ext$versions$2 = ext.versions[0]) !== null && _ext$versions$2 !== void 0 && _ext$versions$2.manifestVersion) {\n    latestVersion = ext.versions[0].manifestVersion;\n    console.log('✅ Método 4 - Versión desde manifestVersion:', latestVersion);\n  }\n  console.log('🏷️ VERSIÓN FINAL DETERMINADA:', latestVersion || 'NO ENCONTRADA');\n\n  // Normalizar estadísticas a un objeto para extraer valores fácilmente\n  const statsObj = {};\n  for (const s of ext.statistics || []) {\n    statsObj[s.statisticName] = s.value;\n    console.log(`📊 Estadística: \"${s.statisticName}\" = ${s.value} (tipo: ${typeof s.value})`);\n  }\n  console.log('🗺️ Objeto de estadísticas normalizado:', statsObj);\n\n  // BÚSQUEDA MEJORADA - Buscar con múltiples nombres posibles\n  const findStatValue = (possibleNames, logPrefix) => {\n    console.log(`🔍 ${logPrefix} - Buscando entre:`, possibleNames);\n    for (const name of possibleNames) {\n      // Buscar exact match\n      if (statsObj[name] !== undefined && statsObj[name] !== null) {\n        console.log(`✅ ${logPrefix} - Encontrado con \"${name}\": ${statsObj[name]}`);\n        return Number(statsObj[name]);\n      }\n\n      // Buscar case-insensitive\n      const lowerName = name.toLowerCase();\n      for (const [key, value] of Object.entries(statsObj)) {\n        if (key.toLowerCase() === lowerName && value !== undefined && value !== null) {\n          console.log(`✅ ${logPrefix} - Encontrado case-insensitive \"${key}\": ${value}`);\n          return Number(value);\n        }\n      }\n    }\n    console.log(`❌ ${logPrefix} - No encontrado en ninguna variante`);\n    return null;\n  };\n\n  // Buscar downloads/instalaciones totales\n  const totalDescargas = findStatValue(['downloads', 'download', 'downloadCount', 'totalDownloads', 'install', 'installs', 'installCount', 'totalInstalls', 'cumulativeInstalls', 'allTimeInstalls'], 'DOWNLOADS');\n\n  // Buscar instalaciones activas (esto ya funciona)\n  const totalInstalaciones = findStatValue(['install', 'installs', 'installCount', 'activeInstalls', 'currentInstalls', 'liveInstalls'], 'ACTIVE INSTALLS');\n\n  // Buscar rating promedio\n  const promedioRating = findStatValue(['averageRating', 'averagerating', 'rating', 'averageScore', 'score', 'ratingAverage'], 'RATING');\n\n  // Buscar total de valoraciones\n  const totalValoraciones = findStatValue(['ratingCount', 'ratingcount', 'reviewCount', 'reviewcount', 'ratingsCount', 'totalRatings', 'totalReviews'], 'RATING COUNT');\n  const result = {\n    totalInstalaciones: totalInstalaciones,\n    promedioRating: promedioRating,\n    totalValoraciones: totalValoraciones,\n    totalDescargas: totalDescargas,\n    version: latestVersion // ✨ USAR VERSIÓN DEPURADA\n  };\n  console.log('📈 Métricas finales extraídas:', result);\n  console.log('🔍 RESUMEN COMPLETO:');\n  console.log(`  Downloads: ${totalDescargas || 'NO ENCONTRADO'}`);\n  console.log(`  Active Installs: ${totalInstalaciones || 'NO ENCONTRADO'}`);\n  console.log(`  Rating: ${promedioRating || 'NO ENCONTRADO'}`);\n  console.log(`  Rating Count: ${totalValoraciones || 'NO ENCONTRADO'}`);\n  console.log(`  Version: ${latestVersion || 'NO ENCONTRADO'}`);\n  return result;\n}\n\n// Función de adaptación para mantener compatibilidad con el hook existente\nexport const getExtensionStats = async () => {\n  try {\n    console.log('🚀 Iniciando obtención de métricas con método exacto...');\n    const metrics = await obtenerMetricasCodeXR();\n    console.log('✅ Métricas de Code-XR obtenidas:', metrics);\n\n    // Adaptar al formato que espera el hook\n    const adaptedStats = {\n      downloads: metrics.totalDescargas,\n      installs: metrics.totalInstalaciones,\n      rating: metrics.promedioRating,\n      ratingCount: metrics.totalValoraciones,\n      version: metrics.version,\n      // ✨ NO USAR FALLBACK AQUÍ\n      debug: {\n        rawMetrics: metrics,\n        source: 'exact-api-method'\n      }\n    };\n    console.log('🔄 Stats adaptadas para el hook:', adaptedStats);\n    return adaptedStats;\n  } catch (error) {\n    console.error('💥 Error obteniendo métricas:', error);\n\n    // Retornar valores null en caso de error\n    return {\n      downloads: null,\n      installs: null,\n      rating: null,\n      ratingCount: null,\n      version: null,\n      // ✨ NULL TAMBIÉN PARA VERSION\n      error: error.message\n    };\n  }\n};\n\n// Exportar también la función original por si la necesitas\nexport { obtenerMetricasCodeXR };\n\n// Método de fallback (mantener por si acaso)\nexport const getStatsFromWebPage = async () => {\n  try {\n    console.log('🌐 Método de fallback: scraping web...');\n    const response = await fetch(`https://marketplace.visualstudio.com/items?itemName=${EXTENSION_ID}`, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n      }\n    });\n    const html = await response.text();\n    console.log('📄 HTML obtenido para fallback, longitud:', html.length);\n\n    // Patrones básicos para fallback\n    const downloadMatch = html.match(/(\\d{1,3}(?:,\\d{3})*)\\s*(?:downloads?|installs?)/i);\n    const installMatch = html.match(/(\\d{1,3}(?:,\\d{3})*)\\s*(?:active|current)\\s*(?:installs?|users?)/i);\n    const downloads = downloadMatch ? parseInt(downloadMatch[1].replace(/,/g, '')) : null;\n    const installs = installMatch ? parseInt(installMatch[1].replace(/,/g, '')) : null;\n    console.log('📊 Resultados del fallback web scraping:', {\n      downloads,\n      installs\n    });\n    return {\n      downloads: downloads,\n      installs: installs,\n      source: 'web-scraping-fallback'\n    };\n  } catch (error) {\n    console.error('💥 Error en fallback web scraping:', error);\n    return null;\n  }\n};","map":{"version":3,"names":["EXTENSION_ID","obtenerMetricasCodeXR","_data$results$","_ext$versions$","_ext$versions$2","url","body","filters","criteria","filterType","value","pageNumber","pageSize","flags","console","log","JSON","stringify","response","fetch","method","headers","status","ok","Error","statusText","data","json","ext","results","extensions","error","extensionName","statistics","versions","Array","isArray","length","slice","forEach","version","index","lastUpdated","properties","assetUri","fallbackAssetUri","latestVersion","displayName","versionMatch","match","prop","key","toLowerCase","includes","manifestVersion","statsObj","s","statisticName","findStatValue","possibleNames","logPrefix","name","undefined","Number","lowerName","Object","entries","totalDescargas","totalInstalaciones","promedioRating","totalValoraciones","result","getExtensionStats","metrics","adaptedStats","downloads","installs","rating","ratingCount","debug","rawMetrics","source","message","getStatsFromWebPage","html","text","downloadMatch","installMatch","parseInt","replace"],"sources":["/home/adrian/web_code_xr/src/utils/marketplaceAPI.js"],"sourcesContent":["const EXTENSION_ID = 'aMonteSl.code-xr';\n\n// Función principal basada en tu ejemplo exacto\nasync function obtenerMetricasCodeXR() {\n  const url = 'https://marketplace.visualstudio.com/_apis/public/gallery/extensionquery?api-version=3.0-preview.1';\n\n  // Body de la petición, filtrando por \"aMonteSl.code-xr\" y pidiendo estadísticas (flags = 256)\n  const body = {\n    filters: [\n      {\n        criteria: [\n          {\n            filterType: 7,\n            value: EXTENSION_ID // Identificador completo de la extensión\n          }\n        ],\n        pageNumber: 1,\n        pageSize: 1\n      }\n    ],\n    flags: 256 // IncludeStatistics (descargas, instalaciones, rating)\n  };\n\n  console.log('🔍 Realizando petición exacta a la API para:', EXTENSION_ID);\n  console.log('📋 Body de la petición:', JSON.stringify(body, null, 2));\n\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json;api-version=3.0-preview.1'\n    },\n    body: JSON.stringify(body)\n  });\n\n  console.log('📡 Respuesta HTTP status:', response.status);\n\n  if (!response.ok) {\n    throw new Error(`Error al consultar API: ${response.status} ${response.statusText}`);\n  }\n\n  const data = await response.json();\n  console.log('📊 Datos completos de la API:', data);\n  \n  const ext = data.results[0]?.extensions[0];\n  if (!ext) {\n    console.error('❌ La extensión Code-XR no fue encontrada en el Marketplace.');\n    throw new Error('La extensión Code-XR no fue encontrada en el Marketplace.');\n  }\n\n  console.log('✅ Extensión encontrada:', ext.extensionName);\n  console.log('📈 Estadísticas raw:', ext.statistics);\n\n  // 🔍 DEPURACIÓN ESPECÍFICA DE VERSIONES\n  console.log('🏷️ DEPURACIÓN DE VERSIONES:');\n  console.log('📦 ¿Existe ext.versions?', !!ext.versions);\n  console.log('📦 Tipo de ext.versions:', typeof ext.versions);\n  console.log('📦 Es array ext.versions?', Array.isArray(ext.versions));\n  \n  if (ext.versions) {\n    console.log('📦 Longitud del array versions:', ext.versions.length);\n    console.log('📦 TODAS las versiones disponibles:', ext.versions);\n    \n    // Mostrar las primeras 3 versiones con detalle\n    ext.versions.slice(0, 3).forEach((version, index) => {\n      console.log(`📦 Versión ${index}:`, {\n        version: version.version,\n        lastUpdated: version.lastUpdated,\n        properties: version.properties,\n        assetUri: version.assetUri,\n        fallbackAssetUri: version.fallbackAssetUri\n      });\n    });\n  } else {\n    console.log('❌ ext.versions NO existe');\n  }\n\n  // Intentar obtener versión de múltiples formas\n  let latestVersion = null;\n  \n  // Método 1: Primer elemento del array versions\n  if (ext.versions && Array.isArray(ext.versions) && ext.versions.length > 0) {\n    latestVersion = ext.versions[0].version;\n    console.log('✅ Método 1 - Versión desde versions[0]:', latestVersion);\n  }\n  \n  // Método 2: Buscar en displayName o extensionName\n  if (!latestVersion && ext.displayName) {\n    const versionMatch = ext.displayName.match(/v?(\\d+\\.\\d+\\.\\d+)/);\n    if (versionMatch) {\n      latestVersion = versionMatch[1];\n      console.log('✅ Método 2 - Versión desde displayName:', latestVersion);\n    }\n  }\n  \n  // Método 3: Buscar en properties\n  if (!latestVersion && ext.versions && ext.versions[0]?.properties) {\n    for (const prop of ext.versions[0].properties) {\n      if (prop.key === 'Microsoft.VisualStudio.Code.Engine' || \n          prop.key === 'version' || \n          prop.key.toLowerCase().includes('version')) {\n        console.log(`🔍 Propiedad encontrada: ${prop.key} = ${prop.value}`);\n        const versionMatch = prop.value.match(/v?(\\d+\\.\\d+\\.\\d+)/);\n        if (versionMatch) {\n          latestVersion = versionMatch[1];\n          console.log('✅ Método 3 - Versión desde properties:', latestVersion);\n          break;\n        }\n      }\n    }\n  }\n  \n  // Método 4: Buscar en manifestVersion (si existe)\n  if (!latestVersion && ext.versions && ext.versions[0]?.manifestVersion) {\n    latestVersion = ext.versions[0].manifestVersion;\n    console.log('✅ Método 4 - Versión desde manifestVersion:', latestVersion);\n  }\n\n  console.log('🏷️ VERSIÓN FINAL DETERMINADA:', latestVersion || 'NO ENCONTRADA');\n\n  // Normalizar estadísticas a un objeto para extraer valores fácilmente\n  const statsObj = {};\n  for (const s of ext.statistics || []) {\n    statsObj[s.statisticName] = s.value;\n    console.log(`📊 Estadística: \"${s.statisticName}\" = ${s.value} (tipo: ${typeof s.value})`);\n  }\n\n  console.log('🗺️ Objeto de estadísticas normalizado:', statsObj);\n\n  // BÚSQUEDA MEJORADA - Buscar con múltiples nombres posibles\n  const findStatValue = (possibleNames, logPrefix) => {\n    console.log(`🔍 ${logPrefix} - Buscando entre:`, possibleNames);\n    \n    for (const name of possibleNames) {\n      // Buscar exact match\n      if (statsObj[name] !== undefined && statsObj[name] !== null) {\n        console.log(`✅ ${logPrefix} - Encontrado con \"${name}\": ${statsObj[name]}`);\n        return Number(statsObj[name]);\n      }\n      \n      // Buscar case-insensitive\n      const lowerName = name.toLowerCase();\n      for (const [key, value] of Object.entries(statsObj)) {\n        if (key.toLowerCase() === lowerName && value !== undefined && value !== null) {\n          console.log(`✅ ${logPrefix} - Encontrado case-insensitive \"${key}\": ${value}`);\n          return Number(value);\n        }\n      }\n    }\n    \n    console.log(`❌ ${logPrefix} - No encontrado en ninguna variante`);\n    return null;\n  };\n\n  // Buscar downloads/instalaciones totales\n  const totalDescargas = findStatValue([\n    'downloads', 'download', 'downloadCount', 'totalDownloads',\n    'install', 'installs', 'installCount', 'totalInstalls',\n    'cumulativeInstalls', 'allTimeInstalls'\n  ], 'DOWNLOADS');\n\n  // Buscar instalaciones activas (esto ya funciona)\n  const totalInstalaciones = findStatValue([\n    'install', 'installs', 'installCount', 'activeInstalls',\n    'currentInstalls', 'liveInstalls'\n  ], 'ACTIVE INSTALLS');\n\n  // Buscar rating promedio\n  const promedioRating = findStatValue([\n    'averageRating', 'averagerating', 'rating', 'averageScore',\n    'score', 'ratingAverage'\n  ], 'RATING');\n\n  // Buscar total de valoraciones\n  const totalValoraciones = findStatValue([\n    'ratingCount', 'ratingcount', 'reviewCount', 'reviewcount',\n    'ratingsCount', 'totalRatings', 'totalReviews'\n  ], 'RATING COUNT');\n\n  const result = {\n    totalInstalaciones: totalInstalaciones,\n    promedioRating: promedioRating,\n    totalValoraciones: totalValoraciones,\n    totalDescargas: totalDescargas,\n    version: latestVersion // ✨ USAR VERSIÓN DEPURADA\n  };\n\n  console.log('📈 Métricas finales extraídas:', result);\n  console.log('🔍 RESUMEN COMPLETO:');\n  console.log(`  Downloads: ${totalDescargas || 'NO ENCONTRADO'}`);\n  console.log(`  Active Installs: ${totalInstalaciones || 'NO ENCONTRADO'}`);\n  console.log(`  Rating: ${promedioRating || 'NO ENCONTRADO'}`);\n  console.log(`  Rating Count: ${totalValoraciones || 'NO ENCONTRADO'}`);\n  console.log(`  Version: ${latestVersion || 'NO ENCONTRADO'}`);\n\n  return result;\n}\n\n// Función de adaptación para mantener compatibilidad con el hook existente\nexport const getExtensionStats = async () => {\n  try {\n    console.log('🚀 Iniciando obtención de métricas con método exacto...');\n    \n    const metrics = await obtenerMetricasCodeXR();\n    \n    console.log('✅ Métricas de Code-XR obtenidas:', metrics);\n    \n    // Adaptar al formato que espera el hook\n    const adaptedStats = {\n      downloads: metrics.totalDescargas,\n      installs: metrics.totalInstalaciones,\n      rating: metrics.promedioRating,\n      ratingCount: metrics.totalValoraciones,\n      version: metrics.version, // ✨ NO USAR FALLBACK AQUÍ\n      debug: {\n        rawMetrics: metrics,\n        source: 'exact-api-method'\n      }\n    };\n\n    console.log('🔄 Stats adaptadas para el hook:', adaptedStats);\n    \n    return adaptedStats;\n\n  } catch (error) {\n    console.error('💥 Error obteniendo métricas:', error);\n    \n    // Retornar valores null en caso de error\n    return {\n      downloads: null,\n      installs: null,\n      rating: null,\n      ratingCount: null,\n      version: null, // ✨ NULL TAMBIÉN PARA VERSION\n      error: error.message\n    };\n  }\n};\n\n// Exportar también la función original por si la necesitas\nexport { obtenerMetricasCodeXR };\n\n// Método de fallback (mantener por si acaso)\nexport const getStatsFromWebPage = async () => {\n  try {\n    console.log('🌐 Método de fallback: scraping web...');\n    \n    const response = await fetch(\n      `https://marketplace.visualstudio.com/items?itemName=${EXTENSION_ID}`,\n      {\n        headers: {\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n        }\n      }\n    );\n    \n    const html = await response.text();\n    console.log('📄 HTML obtenido para fallback, longitud:', html.length);\n\n    // Patrones básicos para fallback\n    const downloadMatch = html.match(/(\\d{1,3}(?:,\\d{3})*)\\s*(?:downloads?|installs?)/i);\n    const installMatch = html.match(/(\\d{1,3}(?:,\\d{3})*)\\s*(?:active|current)\\s*(?:installs?|users?)/i);\n\n    const downloads = downloadMatch ? parseInt(downloadMatch[1].replace(/,/g, '')) : null;\n    const installs = installMatch ? parseInt(installMatch[1].replace(/,/g, '')) : null;\n\n    console.log('📊 Resultados del fallback web scraping:', { downloads, installs });\n\n    return {\n      downloads: downloads,\n      installs: installs,\n      source: 'web-scraping-fallback'\n    };\n\n  } catch (error) {\n    console.error('💥 Error en fallback web scraping:', error);\n    return null;\n  }\n};"],"mappings":"AAAA,MAAMA,YAAY,GAAG,kBAAkB;;AAEvC;AACA,eAAeC,qBAAqBA,CAAA,EAAG;EAAA,IAAAC,cAAA,EAAAC,cAAA,EAAAC,eAAA;EACrC,MAAMC,GAAG,GAAG,oGAAoG;;EAEhH;EACA,MAAMC,IAAI,GAAG;IACXC,OAAO,EAAE,CACP;MACEC,QAAQ,EAAE,CACR;QACEC,UAAU,EAAE,CAAC;QACbC,KAAK,EAAEV,YAAY,CAAC;MACtB,CAAC,CACF;MACDW,UAAU,EAAE,CAAC;MACbC,QAAQ,EAAE;IACZ,CAAC,CACF;IACDC,KAAK,EAAE,GAAG,CAAC;EACb,CAAC;EAEDC,OAAO,CAACC,GAAG,CAAC,8CAA8C,EAAEf,YAAY,CAAC;EACzEc,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEC,IAAI,CAACC,SAAS,CAACX,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EAErE,MAAMY,QAAQ,GAAG,MAAMC,KAAK,CAACd,GAAG,EAAE;IAChCe,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,QAAQ,EAAE;IACZ,CAAC;IACDf,IAAI,EAAEU,IAAI,CAACC,SAAS,CAACX,IAAI;EAC3B,CAAC,CAAC;EAEFQ,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEG,QAAQ,CAACI,MAAM,CAAC;EAEzD,IAAI,CAACJ,QAAQ,CAACK,EAAE,EAAE;IAChB,MAAM,IAAIC,KAAK,CAAC,2BAA2BN,QAAQ,CAACI,MAAM,IAAIJ,QAAQ,CAACO,UAAU,EAAE,CAAC;EACtF;EAEA,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;EAClCb,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEW,IAAI,CAAC;EAElD,MAAME,GAAG,IAAA1B,cAAA,GAAGwB,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,cAAA3B,cAAA,uBAAfA,cAAA,CAAiB4B,UAAU,CAAC,CAAC,CAAC;EAC1C,IAAI,CAACF,GAAG,EAAE;IACRd,OAAO,CAACiB,KAAK,CAAC,6DAA6D,CAAC;IAC5E,MAAM,IAAIP,KAAK,CAAC,2DAA2D,CAAC;EAC9E;EAEAV,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEa,GAAG,CAACI,aAAa,CAAC;EACzDlB,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEa,GAAG,CAACK,UAAU,CAAC;;EAEnD;EACAnB,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;EAC3CD,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE,CAAC,CAACa,GAAG,CAACM,QAAQ,CAAC;EACvDpB,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE,OAAOa,GAAG,CAACM,QAAQ,CAAC;EAC5DpB,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEoB,KAAK,CAACC,OAAO,CAACR,GAAG,CAACM,QAAQ,CAAC,CAAC;EAErE,IAAIN,GAAG,CAACM,QAAQ,EAAE;IAChBpB,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEa,GAAG,CAACM,QAAQ,CAACG,MAAM,CAAC;IACnEvB,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEa,GAAG,CAACM,QAAQ,CAAC;;IAEhE;IACAN,GAAG,CAACM,QAAQ,CAACI,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,OAAO,CAAC,CAACC,OAAO,EAAEC,KAAK,KAAK;MACnD3B,OAAO,CAACC,GAAG,CAAC,cAAc0B,KAAK,GAAG,EAAE;QAClCD,OAAO,EAAEA,OAAO,CAACA,OAAO;QACxBE,WAAW,EAAEF,OAAO,CAACE,WAAW;QAChCC,UAAU,EAAEH,OAAO,CAACG,UAAU;QAC9BC,QAAQ,EAAEJ,OAAO,CAACI,QAAQ;QAC1BC,gBAAgB,EAAEL,OAAO,CAACK;MAC5B,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,MAAM;IACL/B,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;EACzC;;EAEA;EACA,IAAI+B,aAAa,GAAG,IAAI;;EAExB;EACA,IAAIlB,GAAG,CAACM,QAAQ,IAAIC,KAAK,CAACC,OAAO,CAACR,GAAG,CAACM,QAAQ,CAAC,IAAIN,GAAG,CAACM,QAAQ,CAACG,MAAM,GAAG,CAAC,EAAE;IAC1ES,aAAa,GAAGlB,GAAG,CAACM,QAAQ,CAAC,CAAC,CAAC,CAACM,OAAO;IACvC1B,OAAO,CAACC,GAAG,CAAC,yCAAyC,EAAE+B,aAAa,CAAC;EACvE;;EAEA;EACA,IAAI,CAACA,aAAa,IAAIlB,GAAG,CAACmB,WAAW,EAAE;IACrC,MAAMC,YAAY,GAAGpB,GAAG,CAACmB,WAAW,CAACE,KAAK,CAAC,mBAAmB,CAAC;IAC/D,IAAID,YAAY,EAAE;MAChBF,aAAa,GAAGE,YAAY,CAAC,CAAC,CAAC;MAC/BlC,OAAO,CAACC,GAAG,CAAC,yCAAyC,EAAE+B,aAAa,CAAC;IACvE;EACF;;EAEA;EACA,IAAI,CAACA,aAAa,IAAIlB,GAAG,CAACM,QAAQ,KAAA/B,cAAA,GAAIyB,GAAG,CAACM,QAAQ,CAAC,CAAC,CAAC,cAAA/B,cAAA,eAAfA,cAAA,CAAiBwC,UAAU,EAAE;IACjE,KAAK,MAAMO,IAAI,IAAItB,GAAG,CAACM,QAAQ,CAAC,CAAC,CAAC,CAACS,UAAU,EAAE;MAC7C,IAAIO,IAAI,CAACC,GAAG,KAAK,oCAAoC,IACjDD,IAAI,CAACC,GAAG,KAAK,SAAS,IACtBD,IAAI,CAACC,GAAG,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;QAC9CvC,OAAO,CAACC,GAAG,CAAC,4BAA4BmC,IAAI,CAACC,GAAG,MAAMD,IAAI,CAACxC,KAAK,EAAE,CAAC;QACnE,MAAMsC,YAAY,GAAGE,IAAI,CAACxC,KAAK,CAACuC,KAAK,CAAC,mBAAmB,CAAC;QAC1D,IAAID,YAAY,EAAE;UAChBF,aAAa,GAAGE,YAAY,CAAC,CAAC,CAAC;UAC/BlC,OAAO,CAACC,GAAG,CAAC,wCAAwC,EAAE+B,aAAa,CAAC;UACpE;QACF;MACF;IACF;EACF;;EAEA;EACA,IAAI,CAACA,aAAa,IAAIlB,GAAG,CAACM,QAAQ,KAAA9B,eAAA,GAAIwB,GAAG,CAACM,QAAQ,CAAC,CAAC,CAAC,cAAA9B,eAAA,eAAfA,eAAA,CAAiBkD,eAAe,EAAE;IACtER,aAAa,GAAGlB,GAAG,CAACM,QAAQ,CAAC,CAAC,CAAC,CAACoB,eAAe;IAC/CxC,OAAO,CAACC,GAAG,CAAC,6CAA6C,EAAE+B,aAAa,CAAC;EAC3E;EAEAhC,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAE+B,aAAa,IAAI,eAAe,CAAC;;EAE/E;EACA,MAAMS,QAAQ,GAAG,CAAC,CAAC;EACnB,KAAK,MAAMC,CAAC,IAAI5B,GAAG,CAACK,UAAU,IAAI,EAAE,EAAE;IACpCsB,QAAQ,CAACC,CAAC,CAACC,aAAa,CAAC,GAAGD,CAAC,CAAC9C,KAAK;IACnCI,OAAO,CAACC,GAAG,CAAC,oBAAoByC,CAAC,CAACC,aAAa,OAAOD,CAAC,CAAC9C,KAAK,WAAW,OAAO8C,CAAC,CAAC9C,KAAK,GAAG,CAAC;EAC5F;EAEAI,OAAO,CAACC,GAAG,CAAC,yCAAyC,EAAEwC,QAAQ,CAAC;;EAEhE;EACA,MAAMG,aAAa,GAAGA,CAACC,aAAa,EAAEC,SAAS,KAAK;IAClD9C,OAAO,CAACC,GAAG,CAAC,MAAM6C,SAAS,oBAAoB,EAAED,aAAa,CAAC;IAE/D,KAAK,MAAME,IAAI,IAAIF,aAAa,EAAE;MAChC;MACA,IAAIJ,QAAQ,CAACM,IAAI,CAAC,KAAKC,SAAS,IAAIP,QAAQ,CAACM,IAAI,CAAC,KAAK,IAAI,EAAE;QAC3D/C,OAAO,CAACC,GAAG,CAAC,KAAK6C,SAAS,sBAAsBC,IAAI,MAAMN,QAAQ,CAACM,IAAI,CAAC,EAAE,CAAC;QAC3E,OAAOE,MAAM,CAACR,QAAQ,CAACM,IAAI,CAAC,CAAC;MAC/B;;MAEA;MACA,MAAMG,SAAS,GAAGH,IAAI,CAACT,WAAW,CAAC,CAAC;MACpC,KAAK,MAAM,CAACD,GAAG,EAAEzC,KAAK,CAAC,IAAIuD,MAAM,CAACC,OAAO,CAACX,QAAQ,CAAC,EAAE;QACnD,IAAIJ,GAAG,CAACC,WAAW,CAAC,CAAC,KAAKY,SAAS,IAAItD,KAAK,KAAKoD,SAAS,IAAIpD,KAAK,KAAK,IAAI,EAAE;UAC5EI,OAAO,CAACC,GAAG,CAAC,KAAK6C,SAAS,mCAAmCT,GAAG,MAAMzC,KAAK,EAAE,CAAC;UAC9E,OAAOqD,MAAM,CAACrD,KAAK,CAAC;QACtB;MACF;IACF;IAEAI,OAAO,CAACC,GAAG,CAAC,KAAK6C,SAAS,sCAAsC,CAAC;IACjE,OAAO,IAAI;EACb,CAAC;;EAED;EACA,MAAMO,cAAc,GAAGT,aAAa,CAAC,CACnC,WAAW,EAAE,UAAU,EAAE,eAAe,EAAE,gBAAgB,EAC1D,SAAS,EAAE,UAAU,EAAE,cAAc,EAAE,eAAe,EACtD,oBAAoB,EAAE,iBAAiB,CACxC,EAAE,WAAW,CAAC;;EAEf;EACA,MAAMU,kBAAkB,GAAGV,aAAa,CAAC,CACvC,SAAS,EAAE,UAAU,EAAE,cAAc,EAAE,gBAAgB,EACvD,iBAAiB,EAAE,cAAc,CAClC,EAAE,iBAAiB,CAAC;;EAErB;EACA,MAAMW,cAAc,GAAGX,aAAa,CAAC,CACnC,eAAe,EAAE,eAAe,EAAE,QAAQ,EAAE,cAAc,EAC1D,OAAO,EAAE,eAAe,CACzB,EAAE,QAAQ,CAAC;;EAEZ;EACA,MAAMY,iBAAiB,GAAGZ,aAAa,CAAC,CACtC,aAAa,EAAE,aAAa,EAAE,aAAa,EAAE,aAAa,EAC1D,cAAc,EAAE,cAAc,EAAE,cAAc,CAC/C,EAAE,cAAc,CAAC;EAElB,MAAMa,MAAM,GAAG;IACbH,kBAAkB,EAAEA,kBAAkB;IACtCC,cAAc,EAAEA,cAAc;IAC9BC,iBAAiB,EAAEA,iBAAiB;IACpCH,cAAc,EAAEA,cAAc;IAC9B3B,OAAO,EAAEM,aAAa,CAAC;EACzB,CAAC;EAEDhC,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEwD,MAAM,CAAC;EACrDzD,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;EACnCD,OAAO,CAACC,GAAG,CAAC,gBAAgBoD,cAAc,IAAI,eAAe,EAAE,CAAC;EAChErD,OAAO,CAACC,GAAG,CAAC,sBAAsBqD,kBAAkB,IAAI,eAAe,EAAE,CAAC;EAC1EtD,OAAO,CAACC,GAAG,CAAC,aAAasD,cAAc,IAAI,eAAe,EAAE,CAAC;EAC7DvD,OAAO,CAACC,GAAG,CAAC,mBAAmBuD,iBAAiB,IAAI,eAAe,EAAE,CAAC;EACtExD,OAAO,CAACC,GAAG,CAAC,cAAc+B,aAAa,IAAI,eAAe,EAAE,CAAC;EAE7D,OAAOyB,MAAM;AACf;;AAEA;AACA,OAAO,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;EAC3C,IAAI;IACF1D,OAAO,CAACC,GAAG,CAAC,yDAAyD,CAAC;IAEtE,MAAM0D,OAAO,GAAG,MAAMxE,qBAAqB,CAAC,CAAC;IAE7Ca,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAE0D,OAAO,CAAC;;IAExD;IACA,MAAMC,YAAY,GAAG;MACnBC,SAAS,EAAEF,OAAO,CAACN,cAAc;MACjCS,QAAQ,EAAEH,OAAO,CAACL,kBAAkB;MACpCS,MAAM,EAAEJ,OAAO,CAACJ,cAAc;MAC9BS,WAAW,EAAEL,OAAO,CAACH,iBAAiB;MACtC9B,OAAO,EAAEiC,OAAO,CAACjC,OAAO;MAAE;MAC1BuC,KAAK,EAAE;QACLC,UAAU,EAAEP,OAAO;QACnBQ,MAAM,EAAE;MACV;IACF,CAAC;IAEDnE,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAE2D,YAAY,CAAC;IAE7D,OAAOA,YAAY;EAErB,CAAC,CAAC,OAAO3C,KAAK,EAAE;IACdjB,OAAO,CAACiB,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;;IAErD;IACA,OAAO;MACL4C,SAAS,EAAE,IAAI;MACfC,QAAQ,EAAE,IAAI;MACdC,MAAM,EAAE,IAAI;MACZC,WAAW,EAAE,IAAI;MACjBtC,OAAO,EAAE,IAAI;MAAE;MACfT,KAAK,EAAEA,KAAK,CAACmD;IACf,CAAC;EACH;AACF,CAAC;;AAED;AACA,SAASjF,qBAAqB;;AAE9B;AACA,OAAO,MAAMkF,mBAAmB,GAAG,MAAAA,CAAA,KAAY;EAC7C,IAAI;IACFrE,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;IAErD,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAC1B,uDAAuDnB,YAAY,EAAE,EACrE;MACEqB,OAAO,EAAE;QACP,YAAY,EAAE;MAChB;IACF,CACF,CAAC;IAED,MAAM+D,IAAI,GAAG,MAAMlE,QAAQ,CAACmE,IAAI,CAAC,CAAC;IAClCvE,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAAEqE,IAAI,CAAC/C,MAAM,CAAC;;IAErE;IACA,MAAMiD,aAAa,GAAGF,IAAI,CAACnC,KAAK,CAAC,kDAAkD,CAAC;IACpF,MAAMsC,YAAY,GAAGH,IAAI,CAACnC,KAAK,CAAC,mEAAmE,CAAC;IAEpG,MAAM0B,SAAS,GAAGW,aAAa,GAAGE,QAAQ,CAACF,aAAa,CAAC,CAAC,CAAC,CAACG,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI;IACrF,MAAMb,QAAQ,GAAGW,YAAY,GAAGC,QAAQ,CAACD,YAAY,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI;IAElF3E,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAE;MAAE4D,SAAS;MAAEC;IAAS,CAAC,CAAC;IAEhF,OAAO;MACLD,SAAS,EAAEA,SAAS;MACpBC,QAAQ,EAAEA,QAAQ;MAClBK,MAAM,EAAE;IACV,CAAC;EAEH,CAAC,CAAC,OAAOlD,KAAK,EAAE;IACdjB,OAAO,CAACiB,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;IAC1D,OAAO,IAAI;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}