{"ast":null,"code":"const EXTENSION_ID = 'aMonteSl.code-xr';\nconst MARKETPLACE_API = 'https://marketplace.visualstudio.com/_apis/public/gallery';\n\n// Función para obtener datos básicos de la extensión\nexport const getExtensionStats = async () => {\n  try {\n    var _data$results$;\n    const response = await fetch(`${MARKETPLACE_API}/extensionquery`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json;api-version=3.0-preview.1'\n      },\n      body: JSON.stringify({\n        filters: [{\n          criteria: [{\n            filterType: 7,\n            value: EXTENSION_ID\n          }]\n        }],\n        flags: 914 // Incluye estadísticas\n      })\n    });\n    const data = await response.json();\n    const extension = (_data$results$ = data.results[0]) === null || _data$results$ === void 0 ? void 0 : _data$results$.extensions[0];\n    if (extension) {\n      var _extension$statistics, _extension$statistics2, _extension$statistics3, _extension$statistics4, _extension$statistics5, _extension$statistics6, _extension$statistics7, _extension$statistics8, _extension$versions$;\n      return {\n        downloads: ((_extension$statistics = extension.statistics) === null || _extension$statistics === void 0 ? void 0 : (_extension$statistics2 = _extension$statistics.find(stat => stat.statisticName === 'download')) === null || _extension$statistics2 === void 0 ? void 0 : _extension$statistics2.value) || 0,\n        installs: ((_extension$statistics3 = extension.statistics) === null || _extension$statistics3 === void 0 ? void 0 : (_extension$statistics4 = _extension$statistics3.find(stat => stat.statisticName === 'install')) === null || _extension$statistics4 === void 0 ? void 0 : _extension$statistics4.value) || 0,\n        rating: ((_extension$statistics5 = extension.statistics) === null || _extension$statistics5 === void 0 ? void 0 : (_extension$statistics6 = _extension$statistics5.find(stat => stat.statisticName === 'averagerating')) === null || _extension$statistics6 === void 0 ? void 0 : _extension$statistics6.value) || 0,\n        ratingCount: ((_extension$statistics7 = extension.statistics) === null || _extension$statistics7 === void 0 ? void 0 : (_extension$statistics8 = _extension$statistics7.find(stat => stat.statisticName === 'ratingcount')) === null || _extension$statistics8 === void 0 ? void 0 : _extension$statistics8.value) || 0,\n        version: ((_extension$versions$ = extension.versions[0]) === null || _extension$versions$ === void 0 ? void 0 : _extension$versions$.version) || '1.0.0'\n      };\n    }\n    return null;\n  } catch (error) {\n    console.error('Error fetching extension stats:', error);\n    return null;\n  }\n};","map":{"version":3,"names":["EXTENSION_ID","MARKETPLACE_API","getExtensionStats","_data$results$","response","fetch","method","headers","body","JSON","stringify","filters","criteria","filterType","value","flags","data","json","extension","results","extensions","_extension$statistics","_extension$statistics2","_extension$statistics3","_extension$statistics4","_extension$statistics5","_extension$statistics6","_extension$statistics7","_extension$statistics8","_extension$versions$","downloads","statistics","find","stat","statisticName","installs","rating","ratingCount","version","versions","error","console"],"sources":["/home/adrian/web_code_xr/src/utils/marketplaceAPI.js"],"sourcesContent":["const EXTENSION_ID = 'aMonteSl.code-xr';\nconst MARKETPLACE_API = 'https://marketplace.visualstudio.com/_apis/public/gallery';\n\n// Función para obtener datos básicos de la extensión\nexport const getExtensionStats = async () => {\n  try {\n    const response = await fetch(`${MARKETPLACE_API}/extensionquery`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json;api-version=3.0-preview.1'\n      },\n      body: JSON.stringify({\n        filters: [{\n          criteria: [\n            { filterType: 7, value: EXTENSION_ID }\n          ]\n        }],\n        flags: 914 // Incluye estadísticas\n      })\n    });\n\n    const data = await response.json();\n    const extension = data.results[0]?.extensions[0];\n    \n    if (extension) {\n      return {\n        downloads: extension.statistics?.find(stat => stat.statisticName === 'download')?.value || 0,\n        installs: extension.statistics?.find(stat => stat.statisticName === 'install')?.value || 0,\n        rating: extension.statistics?.find(stat => stat.statisticName === 'averagerating')?.value || 0,\n        ratingCount: extension.statistics?.find(stat => stat.statisticName === 'ratingcount')?.value || 0,\n        version: extension.versions[0]?.version || '1.0.0'\n      };\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Error fetching extension stats:', error);\n    return null;\n  }\n};"],"mappings":"AAAA,MAAMA,YAAY,GAAG,kBAAkB;AACvC,MAAMC,eAAe,GAAG,2DAA2D;;AAEnF;AACA,OAAO,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;EAC3C,IAAI;IAAA,IAAAC,cAAA;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGJ,eAAe,iBAAiB,EAAE;MAChEK,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,QAAQ,EAAE;MACZ,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBC,OAAO,EAAE,CAAC;UACRC,QAAQ,EAAE,CACR;YAAEC,UAAU,EAAE,CAAC;YAAEC,KAAK,EAAEd;UAAa,CAAC;QAE1C,CAAC,CAAC;QACFe,KAAK,EAAE,GAAG,CAAC;MACb,CAAC;IACH,CAAC,CAAC;IAEF,MAAMC,IAAI,GAAG,MAAMZ,QAAQ,CAACa,IAAI,CAAC,CAAC;IAClC,MAAMC,SAAS,IAAAf,cAAA,GAAGa,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,cAAAhB,cAAA,uBAAfA,cAAA,CAAiBiB,UAAU,CAAC,CAAC,CAAC;IAEhD,IAAIF,SAAS,EAAE;MAAA,IAAAG,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,oBAAA;MACb,OAAO;QACLC,SAAS,EAAE,EAAAT,qBAAA,GAAAH,SAAS,CAACa,UAAU,cAAAV,qBAAA,wBAAAC,sBAAA,GAApBD,qBAAA,CAAsBW,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,aAAa,KAAK,UAAU,CAAC,cAAAZ,sBAAA,uBAArEA,sBAAA,CAAuER,KAAK,KAAI,CAAC;QAC5FqB,QAAQ,EAAE,EAAAZ,sBAAA,GAAAL,SAAS,CAACa,UAAU,cAAAR,sBAAA,wBAAAC,sBAAA,GAApBD,sBAAA,CAAsBS,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,aAAa,KAAK,SAAS,CAAC,cAAAV,sBAAA,uBAApEA,sBAAA,CAAsEV,KAAK,KAAI,CAAC;QAC1FsB,MAAM,EAAE,EAAAX,sBAAA,GAAAP,SAAS,CAACa,UAAU,cAAAN,sBAAA,wBAAAC,sBAAA,GAApBD,sBAAA,CAAsBO,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,aAAa,KAAK,eAAe,CAAC,cAAAR,sBAAA,uBAA1EA,sBAAA,CAA4EZ,KAAK,KAAI,CAAC;QAC9FuB,WAAW,EAAE,EAAAV,sBAAA,GAAAT,SAAS,CAACa,UAAU,cAAAJ,sBAAA,wBAAAC,sBAAA,GAApBD,sBAAA,CAAsBK,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,aAAa,KAAK,aAAa,CAAC,cAAAN,sBAAA,uBAAxEA,sBAAA,CAA0Ed,KAAK,KAAI,CAAC;QACjGwB,OAAO,EAAE,EAAAT,oBAAA,GAAAX,SAAS,CAACqB,QAAQ,CAAC,CAAC,CAAC,cAAAV,oBAAA,uBAArBA,oBAAA,CAAuBS,OAAO,KAAI;MAC7C,CAAC;IACH;IAEA,OAAO,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACvD,OAAO,IAAI;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}