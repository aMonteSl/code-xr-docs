{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getExtensionStats } from '../utils/marketplaceAPI';\nexport const useExtensionStats = () => {\n  _s();\n  const [stats, setStats] = useState({\n    downloads: 120,\n    // Valores fallback\n    installs: 38,\n    rating: 4.8,\n    ratingCount: 42,\n    version: '2.0.0',\n    loading: true,\n    error: null\n  });\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        console.log('🚀 Iniciando fetch con tu método exacto...');\n        setStats(prev => ({\n          ...prev,\n          loading: true,\n          error: null\n        }));\n        const data = await getExtensionStats();\n        if (data && !data.error) {\n          console.log('✅ Datos recibidos del método exacto:', data);\n          const newStats = {\n            // Usar los datos recibidos, mantener fallback solo si son 0 o undefined\n            downloads: data.downloads && data.downloads > 0 ? data.downloads : stats.downloads,\n            installs: data.installs && data.installs > 0 ? data.installs : stats.installs,\n            rating: data.rating && data.rating > 0 ? Math.round(data.rating * 10) / 10 : stats.rating,\n            ratingCount: data.ratingCount && data.ratingCount > 0 ? data.ratingCount : stats.ratingCount,\n            version: data.version || stats.version,\n            loading: false,\n            error: null\n          };\n          console.log('📈 Stats finales aplicadas:', newStats);\n          console.log('🔍 Comparación:');\n          console.log(`  Downloads: ${stats.downloads} → ${newStats.downloads}`);\n          console.log(`  Installs: ${stats.installs} → ${newStats.installs}`);\n          console.log(`  Rating: ${stats.rating} → ${newStats.rating}`);\n          setStats(newStats);\n        } else {\n          console.warn('⚠️ Error en datos o sin datos, manteniendo fallbacks');\n          setStats(prev => ({\n            ...prev,\n            loading: false,\n            error: (data === null || data === void 0 ? void 0 : data.error) || 'No data received'\n          }));\n        }\n      } catch (error) {\n        console.error('💥 Error en hook:', error);\n        setStats(prev => ({\n          ...prev,\n          loading: false,\n          error: 'Failed to load stats'\n        }));\n      }\n    };\n    fetchStats();\n\n    // Actualizar cada 10 minutos\n    const interval = setInterval(fetchStats, 10 * 60 * 1000);\n    return () => clearInterval(interval);\n  }, []);\n  return stats;\n};\n_s(useExtensionStats, \"egXtyDD5JWsDFGAC7rwfKKlW/58=\");","map":{"version":3,"names":["useState","useEffect","getExtensionStats","useExtensionStats","_s","stats","setStats","downloads","installs","rating","ratingCount","version","loading","error","fetchStats","console","log","prev","data","newStats","Math","round","warn","interval","setInterval","clearInterval"],"sources":["/home/adrian/web_code_xr/src/hooks/useExtensionStats.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { getExtensionStats } from '../utils/marketplaceAPI';\n\nexport const useExtensionStats = () => {\n  const [stats, setStats] = useState({\n    downloads: 120, // Valores fallback\n    installs: 38,\n    rating: 4.8,\n    ratingCount: 42,\n    version: '2.0.0',\n    loading: true,\n    error: null\n  });\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        console.log('🚀 Iniciando fetch con tu método exacto...');\n        setStats(prev => ({ ...prev, loading: true, error: null }));\n        \n        const data = await getExtensionStats();\n        \n        if (data && !data.error) {\n          console.log('✅ Datos recibidos del método exacto:', data);\n          \n          const newStats = {\n            // Usar los datos recibidos, mantener fallback solo si son 0 o undefined\n            downloads: (data.downloads && data.downloads > 0) ? data.downloads : stats.downloads,\n            installs: (data.installs && data.installs > 0) ? data.installs : stats.installs,\n            rating: (data.rating && data.rating > 0) ? Math.round(data.rating * 10) / 10 : stats.rating,\n            ratingCount: (data.ratingCount && data.ratingCount > 0) ? data.ratingCount : stats.ratingCount,\n            version: data.version || stats.version,\n            loading: false,\n            error: null\n          };\n\n          console.log('📈 Stats finales aplicadas:', newStats);\n          console.log('🔍 Comparación:');\n          console.log(`  Downloads: ${stats.downloads} → ${newStats.downloads}`);\n          console.log(`  Installs: ${stats.installs} → ${newStats.installs}`);\n          console.log(`  Rating: ${stats.rating} → ${newStats.rating}`);\n          \n          setStats(newStats);\n        } else {\n          console.warn('⚠️ Error en datos o sin datos, manteniendo fallbacks');\n          setStats(prev => ({ \n            ...prev, \n            loading: false,\n            error: data?.error || 'No data received'\n          }));\n        }\n      } catch (error) {\n        console.error('💥 Error en hook:', error);\n        setStats(prev => ({\n          ...prev,\n          loading: false,\n          error: 'Failed to load stats'\n        }));\n      }\n    };\n\n    fetchStats();\n    \n    // Actualizar cada 10 minutos\n    const interval = setInterval(fetchStats, 10 * 60 * 1000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  return stats;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}